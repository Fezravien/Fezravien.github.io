---
layout: post
title: iOS - 데이터 저장(3) - 코어 데이터
tags:
  - ios
  - coredata
hero: https://source.unsplash.com/collection/4585827/
overlay: purple
published: true

---
{: .lead}
<!–-break-–>
{: .lead}
<!–-break-–>

# 데이터 저장(3) - 코어 데이터

## "*코코아 전용의 데이터 프레임워크*"

<br/>

### 코어 데이터 (Core data)

애플이 코코아 개발 환경을 통해 제공하는 **인메모리 방식의 데이터 관리 프레임워크**이다.

코어 데이터를 사용하여 데이터베이스 개발 환경과 유사하게 데이터를 읽고 쓰며 수정하고 삭제할 수 있다.

인메모리 방식인 만큼, 코어 데이터에서 데이터를 다루는 모든 작업은 메모리를 기반으로 동작한다. 다시 말해 코어 데이터를 통해 읽고 쓰는 모든 데이터는 원칙적으로 메모리에 로드된 다음에 처리된다는 뜻이다. 덕분에 대량의 읽기와 쓰기 작업이 발생하더라도 성능에 크게 영향을 끼치지 않는다. 

이는 대부분의 작업이 영구 저장소에서 직접 처리되고, 효율성을 위해 읽기 목적의 데이터 일부만 메모리에 올려 놓고 사용하는 데이터베이스와는 구분되는 효율적 특성이다. 물론 인메모리 기반이라 하더라도 코어 데이터 내부적으로는 파일이나 SQLite 같은 영구 저장소에 보조적으로 데이터를 저장할 수 있기 때문에, 앱이 종료되더라도 데이터가 삭제되지 않는다.

코어 데이터의 데이터 저장 구조는 SQLite의 그것과 상당히 유사하다. 데이터베이스 파일에 해당하는 데이터 모델 파일이 있고, 테이블과 유사한 엔티티를 통해 데이터 저장 구조를 정의한다. 

**코어 데이터는 데이터베이스가 아니다!** -> ORM 매핑 프레임워크라고 보는 것이 조금 더 적절하다 

<br/>

#### 객체 그래프 관리(Object Graph Manager)

프로그래밍 가이드(Core Data Programming Guide)에 따르면 코어 데이터는 **애플리케이션 에서 모델(Model) 계층의 객체를 관리하는 데 사용하는 프레임워크이자, 라이프 사이클이나 영속성 관리를 위한 기능을 제공하는 객체 그래스 관리자(Object Graph Manager)**로 정의된다.

코어 데이터는 영구 저장소에 저장된 각각의 레코드를 읽어들인 다음, 독립적인 객체 형태로 만들어낸다. 데이터를 다루는 행위는 코어 데이터에서 모두 객체 단위로 이루어 진다. 이때 레코드의 데이터가 객체화된 것을 가리켜 `관리되는 객체(Managed Object)` 또는 `관리 객체`라고 부른다. 

그런데 객체가 독립적이라는 것이 다른 객체와 단절되거나 고립된 것을 의미하지 않느다. 코어 데이터에서 정규화된 데이터 객체는 다른 객체와 참조 관계하에 있으며, 서로 간의 관계를 통해 데이터의 완전성을 보장받을 수 있다. 이때 객체를 하나의 노드로 간주하고, 서로 간의 연관 관계를 링크로 이어보면 다양한 연결되는 복합적인 그래프 형태의 도형을 얻게되는데, 이를 객체 그래프라고 한다. 

